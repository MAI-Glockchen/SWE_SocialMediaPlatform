<h2 class="text-2xl font-bold mb-4">Create Post</h2>

<div class="flex flex-col gap-3 max-w-xl">
  <input
    class="border px-3 py-2 rounded"
    placeholder="User"
    [(ngModel)]="user"
  >

  <textarea
    class="border px-3 py-2 rounded"
    placeholder="Text"
    rows="4"
    [(ngModel)]="text"
  ></textarea>

  <input type="file" (change)="onImage($event)">

  <button
    class="bg-blue-600 text-white py-2 rounded hover:bg-blue-700"
    (click)="submitPost()"
  >
    Create
  </button>
</div>

<hr class="my-6">

<h2 class="text-2xl font-bold mb-4">Posts</h2>

<div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
  @for (post of posts; track post.id) {
    <div class="border rounded-lg p-4 shadow-sm hover:shadow-md transition bg-white dark:bg-gray-800">
      <img
        class="rounded mb-2 w-full object-cover"
        [src]="post.image ? ('data:image/png;base64,' + post.image) : '/default.png'"
      >
      <h3 class="text-lg font-semibold">{{ post.user }}</h3>
      <p class="text-gray-700 dark:text-gray-300">{{ post.text }}</p>

      <a
        class="text-blue-600 dark:text-blue-400 hover:underline font-medium"
        [routerLink]="['/post', post.id]"
      >
        Open â†’
      </a>
    </div>
  }
</div>
